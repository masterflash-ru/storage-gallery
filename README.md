# storage-gallery
 надстройка над хранилищем для хранения массива фото, например, галереи товара или новости


предназначена для хранения массива фото для одной новости/статьи/товара, используется основное хранилище storage.
Используется отдельная таблица (storage_gallery), которая хранит метаинформацию отельного фото.
В основное хранилище файлы записываются с основным именем + ID из таблицы storage_gallery, что не вызывает каких-либо пересечений.


из админ части пока реализован простой интерфейс для минимального наполнения, например,

```php
//фрагмент конфига админ интерфейса
.......
                    ColModelHelper::interfaces("img",
                                          ["label"=>"Фото","width"=>200,
                                           "formatoptions" => [
                                               "items"=>[
                                                   "button1"=> [
                                                       "label"=>"Редактировать",
                                                       "icon"=>"",
                                                       "interface"=>"/adm/universal-interface/storage-gallery",
                                                       "get_parameter_name"=>"razdel_id",       //ID нашего массива (эл-та новости, товара....)
                                                       "get_parameters_constants"=>[
                                                           "storage_item_name"=>"tovar",        //имя в хранилище
                                                           "razdel"=>"tovar",                   //имя раздела массива
                                                           "storage_item_rule_name"=>"tovar",   //имя элемента в хранилище для вывода в админке
                                                           "gallery_index" => 0                 //номер галереи
                                                       ],
                                                       "dialog"=>[
                                                           "title"=>"Список фото",
                                                           "width"=>820,
                                                       ]
                                                   ],
                                               ],
                                           ],
                                          ]),


.....
```

имеется view помощник, пока зачаточный:
```php
    /**
    * возвращает массив фото и меиаданных к ним
    * [
        [15116] => array(5) {
        ["img"] => string(60) "/pic/gallery/345_194/02/e7/0b/ca10023a7cb851b7147eebde62.jpg"
        ["alt"] => string(0) ""
        ["date_public"] => string(19) "2018-03-31 07:39:07"
        ["public"] => string(1) "1"
        ["poz"] => NULL
      }
  ]
  * $razdel - имя раздела
  * $razdel_id - ID раздела
  * $index - номер галереи
  * $img_name - имя элемента из хранилища, указанного а конфиге приложения
  * если помощник вызывается без параметров, возвращается сам этот объект
    */

$this->GalleryLib($razdel="",$razdel_id,$index, $img_name);
```